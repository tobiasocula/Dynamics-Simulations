{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>This page shows some examples of curves and surfaces which I've used to test out the simulation.</p> <p>Two sinewaves</p> <ul> <li> <p></p> </li> <li> <p></p> </li> </ul> <p>Some surfaces</p> <ul> <li> <p></p> </li> <li> <p></p> </li> </ul> <p>Analysis of curve physics (trajectory, velocity, etc)</p> <ul> <li> <p></p> </li> <li> <p></p> </li> </ul>"},{"location":"curve_simulation/","title":"Curve simulation","text":""},{"location":"curve_simulation/#def-system_solvefunc-mu0001-x000-dt001-tmax300-x_tonone","title":"<code>def system_solve(func, mu=0.001, x0=0.0, dt=0.01, Tmax=30.0, x_to=None):</code>","text":"<p>We first start with the given parametrisation of a curve in 2D: \\(y(x)=(x,f(x))\\). We then find an arc-length reparametrisation \\(\\gamma(s)=y(S^{-1}(s))\\) where</p> <p>\\(S(s)=\\int_{0}^{s}||y'(x)||dx=\\int_{0}^{s}\\sqrt{1+f'(x)^2}dx\\)</p> <p>We find \\(S^{-1}\\) by numerical computation.</p> <p>However, we want the parameter \\(s\\) to depend on time (since the object does not move with constant speed, but with a speed influenced by gravity). Thus we need to find the actual correct parametrisation of the curve: \\(x(t)=\\gamma(s(t))\\).</p> <p>Differentiating once yields:</p> <p>\\(x'(t)=\\gamma'(s(t))s'(t)=T(s(t))v(t)\\)</p> <p>where \\(T=\\gamma'\\) is the unit tangent vector (along the curve) and \\(v=s'\\) is the velocity (scalar).</p> <p>Differentiating again yields:</p> <p>\\(x''(t)=T'(s(t))v(t)^2+T(s(t))v'(t)\\)</p> <p>Using \\(T'(s)=K(s)N(s)\\) (from the Frenet formulas), with \\(K(s)\\) being the curvature and \\(N(s)\\) the normal unit vector of the tangent plane, and \\(a(t)=v'(t)\\):</p> <p>\\(x''(t)=K(s(t))v(t)^2N(s(t))+a(t)T(s(t))\\)</p> <p>Here, the first term represents the centripetal acceleration, in the direction of \\(N(s(t))\\) and the second represents the tangential acceleration, in the direction of \\(T(s(t))\\).</p> <p>We know that, by Newton's (first, second or third, I can't remember) law, \\(x''(t)=(0,-g)\\), so the total acceleration is just the net acceleration, being gravity in this case. Setting these equal we get</p> <p>\\((0,-g)=K(s(t))v(t)^2N(s(t))+a(t)T(s(t))\\)</p> <p>We can now multiply by \\(T(s(t))\\) on both sides (inner product): \\((0,-g)\\cdot T(s(t))=a(t)\\) The left term vanishes (because \\(T\\) and \\(N\\) form an orthonormal basis) and the second becomes just \\(a(t)\\), because \\(T\\) is unitary. Finally, we add a friction term which will damp the solution, based on the Coulomb + viscous friction (I just looked up some friction models). We thus become the following system of ODEs:</p> \\[\\begin{equation} \\begin{aligned} v'(t)=(0,-g)\\cdot T(s(t))-g\\mu\\cdot\\text{sign}(v(t))+\\alpha ||v(t)|| v(t)\\\\ s'(t)=v(t) \\end{aligned} \\end{equation}\\] <p>where \\(\\alpha\\) is a small scalar, in my simulation chosen to be 0.1. We can solve this for \\(s\\) and \\(v\\) numerically. Thus we have found the solution of the system, yielding the travelled distance \\(s(t)\\) after \\(t\\) seconds and the scalar velocity \\(v(t)\\) after \\(t\\) seconds.</p> <p>I derived this equation somewhat by myself, with the help of some google-searching and AI-prompting (and reading through my differential geometry course).</p>"},{"location":"curve_simulation/#def-system_solve_v2func-mu0001-x000-dt001-tmax300","title":"<code>def system_solve_v2(func, mu=0.001, x0=0.0, dt=0.01, Tmax=30.0):</code>","text":"<p>There is also a second way (potentially easier) way to simulate movement like this (implemented in the above function).</p> <p>Here, we simply project the gravity vector \\((0, -g)\\) onto the normal vector of the tangent line. The tangent line at point \\((x,f(x))\\) has direction vector equal to \\((1,f'(x))\\) and normal vector equal to \\(\\frac{(-f'(x),1)}{||(-f'(x),1)||}=\\frac{(-f'(x),1)}{\\sqrt{1+f'(x)^2}}\\). Thus if we project the gravity vector onto the tangent line we get</p> \\[\\begin{equation} \\frac{(-f'(x),1)}{\\sqrt{1+f'(x)^2}}\\langle \\frac{(-f'(x),1)}{\\sqrt{1+f'(x)^2}},(0,-g)\\rangle =\\frac{-gf'(x)}{1+f'(x)^2}(-f'(x),1) \\end{equation}\\] <p>and this has to be the resulting acceleration vector \\(r''\\) of the particle. If we also add friction, then we get the final ODE:</p> \\[\\begin{equation} r''=(x'',y'')=\\frac{-gf'(x)}{1+f'(x)^2}(-f'(x),1)-\\mu|v|v \\end{equation}\\] <p>where \\(v=(x',y')\\) and \\(|v|=\\sqrt{v_{x}^2+v_{y}^2}\\).</p> <p>Thus we obtain the system of ODEs</p> \\[\\begin{equation} \\begin{aligned} x'=v_x\\\\ y'=v_y\\\\ v_x'=\\frac{-gf'(x)^2}{1+f'(x)^2}-\\mu|v|v_x\\\\ v_y'=\\frac{-gf'(x)}{1+f'(x)^2}-\\mu|v|v_y \\end{aligned} \\end{equation}\\]"},{"location":"surface_simulation/","title":"Surface simulation","text":"<p>This article basically describes the exact thing I'm doing here:</p> <p>https://www.sciencedirect.com/science/article/pii/S2095034919300200</p> <p>First we note that the parametrisation for the surface in 3D we use is of the form</p> <p>\\(F(x,y)=(x,y,f(x,y))\\)</p> <p>Then we compute the normal vector:</p> <p>\\(N(F(x,y))=(-\\frac{df}{dx},-\\frac{df}{dy},1) / ||(-\\frac{df}{dx},-\\frac{df}{dy},1)||\\)</p> <p>We will denote this by \\(n\\).</p> <p>We then define the matrix \\(P\\) as the linear operator which projects onto the tangent plane (perpendicular to \\(n\\)):</p> <p>\\(P=I-nn^{T}\\)</p> <p>This matrix of course depends on the position vector \\(r\\).</p> <p>We first decompose the acceleration vector \\(r''\\) as:</p> <p>\\(r''=g+\\lambda n\\)</p> <p>such that it has a pure gravitational component and a normal component. We then apply the projection \\(P\\):</p> <p>\\(Pr''=Pg+Pn\\)</p> <p>but because \\(Pn=0\\) and we want that \\(r''\\) is tangent, we get</p> <p>\\(r''=Pg=(I-nn^{T})g=g-(g\\cdot n)n\\)</p> <p>where \\(P\\) depends on the position \\(r\\) of course.</p> <p>Another way to see it is: the desired acceleration \\(r''\\) should be the tangent component of gravity.</p> <p>We can also add friction to this, to make it more realistic:</p> <p>\\(r''=Pg+\\mu |r'|r'\\)</p> <p>If we write this out in coordinates, we get the system of ODEs</p> \\[\\begin{equation} \\begin{aligned} x''=-g\\cdot f_x/D-\\mu |v|x'\\\\ y''=-g\\cdot f_y/D-\\mu |v|y'\\\\ z''=-g\\cdot g/D-\\mu |v|z' \\end{aligned} \\end{equation}\\] <p>where</p> \\[\\begin{equation} \\begin{aligned} D=\\sqrt{1+f_{x}^2+f_{y}^2}\\\\ v=r'=\\sqrt{(x')^2+(y')^2+(z')^2} \\end{aligned} \\end{equation}\\] <p>At each step of the iteration, we also (for the sake of numerical stability), project the velocity vector \\(v=(x',y',z')\\) onto the tangent plane, by doing</p> <p>\\(v\\leftarrow v-(v\\cdot n)n\\)</p> <p>and normalizing.</p>"}]}